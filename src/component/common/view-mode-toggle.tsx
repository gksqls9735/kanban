import useViewModeStore from "../../store/viewmode-store";
import { ViewModes } from "../../constants";
import useDropdown from "../../hooks/use-dropdown";


const ViewModeToggle: React.FC<{}> = ({ }) => {
  const { viewMode, setViewMode } = useViewModeStore();
  const { isOpen, wrapperRef, dropdownRef, toggle } = useDropdown();
  const isViewModeStatus = viewMode === ViewModes.STATUS;

  return (
    <>
      <div ref={wrapperRef} className={`view-mode-toggle__button ${isOpen ? 'view-mode-toggle__button--open' : ''}`}
        onClick={toggle}>
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" id="Setting--Streamline-Unicons" height="20" width="20">
          <desc>
            Setting Streamline Icon: https://streamlinehq.com
          </desc>
          <path d="M14.4428 8.517333333333333c-0.12566666666666665 -0.143 -0.19493333333333332 -0.3269333333333333 -0.19493333333333332 -0.5173333333333333s0.06926666666666667 -0.3743333333333333 0.19493333333333332 -0.5174l1.0034 -1.1288c0.11059999999999999 -0.12333333333333332 0.17919999999999997 -0.27846666666666664 0.19613333333333333 -0.4432666666666667 0.01693333333333333 -0.1648 -0.018799999999999997 -0.33066666666666666 -0.10206666666666667 -0.47386666666666666l-1.5678 -2.7122666666666664c-0.08233333333333333 -0.14306666666666668 -0.20779999999999998 -0.2564666666666666 -0.35839999999999994 -0.32399999999999995 -0.15066666666666667 -0.0676 -0.3187333333333333 -0.08586666666666666 -0.48033333333333333 -0.05226666666666666L11.659999999999998 2.646c-0.18746666666666667 0.03873333333333333 -0.38273333333333337 0.007533333333333333 -0.5488 -0.0878 -0.16613333333333333 -0.09526666666666667 -0.2915333333333333 -0.24813333333333332 -0.3526666666666667 -0.4295333333333333l-0.4782 -1.4345333333333334c-0.052599999999999994 -0.15573333333333333 -0.15273333333333333 -0.2909333333333333 -0.2864 -0.38659999999999994 -0.1336 -0.09566666666666665 -0.294 -0.14686666666666665 -0.45826666666666666 -0.14646666666666666H6.400066666666666C6.229133333333333 0.15213333333333331 6.06 0.19939999999999997 5.918466666666667 0.29566666666666663c-0.1416 0.09626666666666667 -0.2477333333333333 0.2362 -0.3022666666666667 0.39846666666666664L5.177199999999999 2.1286666666666667c-0.06113333333333333 0.1814 -0.1866 0.3342666666666666 -0.3526666666666667 0.4295333333333333 -0.16606666666666664 0.09533333333333333 -0.3612666666666667 0.12653333333333333 -0.5488 0.0878l-1.5129333333333332 -0.2978666666666666c-0.1532 -0.021666666666666667 -0.3094 0.002533333333333333 -0.44886666666666664 0.06946666666666666 -0.13953333333333334 0.06693333333333333 -0.25606666666666666 0.17366666666666666 -0.33499999999999996 0.30679999999999996L0.41113333333333335 5.436666666666666c-0.08533333333333333 0.1416 -0.12366666666666666 0.3065333333333333 -0.10959999999999999 0.4712666666666666 0.014066666666666667 0.16473333333333331 0.07986666666666667 0.3208 0.18799999999999997 0.44586666666666663l0.9955333333333334 1.1288c0.12566666666666665 0.14306666666666668 0.19499999999999998 0.32699999999999996 0.19499999999999998 0.5174s-0.06933333333333333 0.37426666666666664 -0.19499999999999998 0.5173333333333333L0.48953333333333326 9.646133333333333c-0.10813333333333333 0.12513333333333332 -0.17393333333333333 0.28113333333333335 -0.18799999999999997 0.44593333333333335 -0.014066666666666667 0.16466666666666666 0.024266666666666666 0.3296 0.10959999999999999 0.4712666666666666l1.5678 2.7122666666666664c0.0824 0.14306666666666668 0.20779999999999998 0.25639999999999996 0.35839999999999994 0.32399999999999995 0.15066666666666667 0.06753333333333333 0.3187333333333333 0.0858 0.48033333333333333 0.05226666666666666l1.4737333333333331 -0.2978666666666666c0.18753333333333333 -0.03873333333333333 0.38273333333333337 -0.007533333333333333 0.5488 0.0878 0.16606666666666664 0.09526666666666667 0.2915333333333333 0.24806666666666666 0.3526666666666667 0.4295333333333333l0.4782 1.4345333333333334c0.05453333333333333 0.16226666666666667 0.16066666666666665 0.30219999999999997 0.3022666666666667 0.39846666666666664 0.14153333333333332 0.09626666666666667 0.31066666666666665 0.14353333333333332 0.48160000000000003 0.1346h3.1356c0.16426666666666667 0.00039999999999999996 0.32466666666666666 -0.0508 0.45826666666666666 -0.14646666666666666 0.13366666666666666 -0.09566666666666665 0.2338 -0.23093333333333332 0.2864 -0.38659999999999994l0.4782 -1.4345333333333334c0.06113333333333333 -0.18146666666666667 0.18653333333333333 -0.3342666666666666 0.3526666666666667 -0.4295333333333333 0.16599999999999998 -0.09533333333333333 0.3612666666666667 -0.12653333333333333 0.5488 -0.0878l1.4737333333333331 0.2978666666666666c0.16166666666666665 0.03353333333333333 0.3297333333333333 0.015266666666666666 0.48033333333333333 -0.05226666666666666 0.15059999999999998 -0.0676 0.2760666666666667 -0.1809333333333333 0.35839999999999994 -0.32399999999999995l1.5678 -2.7122666666666664c0.08326666666666666 -0.14326666666666665 0.119 -0.3091333333333333 0.10206666666666667 -0.47386666666666666 -0.01693333333333333 -0.1648 -0.08553333333333332 -0.31999999999999995 -0.19613333333333333 -0.44333333333333336l-1.0582666666666665 -1.1288Zm-1.168 1.0504666666666667 0.6271333333333333 0.7054666666666667 -1.0034 1.7402666666666664 -0.9249999999999999 -0.18813333333333332c-0.5645333333333333 -0.1154 -1.1518 -0.019533333333333333 -1.6503999999999999 0.26946666666666663 -0.49853333333333333 0.28906666666666664 -0.8735999999999999 0.751 -1.0539999999999998 1.2983333333333333l-0.2978666666666666 0.8779333333333332h-2.0068l-0.2822 -0.8936c-0.1804 -0.5473333333333332 -0.5554666666666667 -1.0092666666666665 -1.0539999999999998 -1.2983333333333333 -0.49853333333333333 -0.289 -1.0857999999999999 -0.3848666666666667 -1.6503999999999999 -0.26946666666666663l-0.9249999999999999 0.18813333333333332 -1.0190666666666666 -1.7323999999999997 0.6271333333333333 -0.7055333333333333c0.38566666666666666 -0.43113333333333337 0.5988666666666667 -0.9893333333333333 0.5988666666666667 -1.5678s-0.21319999999999997 -1.1366 -0.5988666666666667 -1.5678l-0.6271333333333333 -0.7054666666666667 1.0034 -1.7246 0.9249999999999999 0.18813333333333332c0.5645333333333333 0.11546666666666666 1.1518666666666666 0.019533333333333333 1.6503999999999999 -0.26946666666666663s0.8735999999999999 -0.751 1.0539999999999998 -1.2982666666666667l0.2978666666666666 -0.8857999999999999h2.0068l0.2978666666666666 0.8936c0.1804 0.5472666666666666 0.5554666666666667 1.0092666666666665 1.0539999999999998 1.2982666666666667 0.4986 0.28906666666666664 1.0858666666666665 0.38493333333333335 1.6503999999999999 0.2695333333333333l0.9249999999999999 -0.18813333333333332 1.0034 1.7402666666666664 -0.6271333333333333 0.7054666666666667c-0.38126666666666664 0.43019999999999997 -0.5918 0.9851333333333333 -0.5918 1.5599333333333334 0 0.5748666666666666 0.21053333333333335 1.1298 0.5918 1.5599999999999998Zm-5.306933333333333 -4.7034c-0.6201333333333333 0 -1.2264 0.1839333333333333 -1.7420666666666667 0.5284666666666666 -0.5156 0.34453333333333336 -0.9175333333333333 0.8342666666666667 -1.1547999999999998 1.4071999999999998 -0.2373333333333333 0.573 -0.29946666666666666 1.2033999999999998 -0.17846666666666666 1.8116666666666665 0.121 0.6082 0.41966666666666663 1.1669333333333332 0.8581333333333332 1.6054 0.43853333333333333 0.43853333333333333 0.9972 0.7371999999999999 1.6054666666666666 0.8581333333333332 0.6082666666666666 0.12106666666666667 1.2386666666666666 0.05893333333333334 1.8116666666666665 -0.1784 0.5729333333333333 -0.23726666666666665 1.0626666666666666 -0.6392 1.4071999999999998 -1.1547999999999998s0.5284666666666666 -1.1219333333333332 0.5284666666666666 -1.7420666666666667c0 -0.8316666666666667 -0.3303333333333333 -1.6292 -0.9184666666666665 -2.2172 -0.588 -0.5880666666666666 -1.3855333333333333 -0.9183999999999999 -2.217133333333333 -0.9183999999999999Zm0 4.7034c-0.3101333333333333 0 -0.6131333333333333 -0.092 -0.871 -0.26426666666666665 -0.2578 -0.17219999999999996 -0.4588 -0.41713333333333336 -0.5774666666666666 -0.7035333333333332 -0.11866666666666666 -0.2865333333333333 -0.14966666666666667 -0.6017333333333332 -0.0892 -0.9058666666666666 0.06046666666666667 -0.30406666666666665 0.2098 -0.5834666666666666 0.4290666666666666 -0.8027333333333333 0.21926666666666667 -0.21926666666666667 0.49866666666666665 -0.3685999999999999 0.8027333333333333 -0.4290666666666666 0.3041333333333333 -0.060533333333333335 0.6193333333333333 -0.0294 0.9058666666666666 0.0892 0.2864 0.11866666666666666 0.5313333333333333 0.31966666666666665 0.7035333333333332 0.5774666666666666 0.17233333333333334 0.2578 0.26426666666666665 0.5608666666666666 0.26426666666666665 0.871 0 0.4158 -0.16519999999999999 0.8145333333333333 -0.45919999999999994 1.1086s-0.6927999999999999 0.45919999999999994 -1.1086 0.45919999999999994Z" fill="#000000" stroke-width="0.6667" />
        </svg>
      </div>
      {isOpen && (
        <div ref={dropdownRef} className="view-mode-toggle__dropdown">
          <div className="view-mode-toggle__content">
            <div className="view-mode-toggle__title">보기 방식 선택</div>
            <div className="view-mode-toggle__options">
              <div className="view-mode-toggle__option" onClick={() => setViewMode(ViewModes.STATUS)}>
                <div className={`view-mode-toggle__preview ${isViewModeStatus ? 'view-mode-toggle__preview--active' : 'view-mode-toggle__preview'}`}>
                  <div className="view-mode-toggle__progress">
                    <div className="view-mode-toggle__circle pending" />
                    <div className="view-mode-toggle__line pending" />
                    <div className="view-mode-toggle__circle active" />
                    <div className="view-mode-toggle__line active" />
                    <div className="view-mode-toggle__circle completed" />
                  </div>
                </div>
                <div className="view-mode-toggle__label">상태별</div>
              </div>
              <div className="view-mode-toggle__option" onClick={() => setViewMode(ViewModes.SECTION)}>
                <div className={`view-mode-toggle__preview ${!isViewModeStatus ? 'view-mode-toggle__preview--active' : 'view-mode-toggle__preview'}`}>
                  <div className="view-mode-toggle__folder-layout">
                    <div className="view-mode-toggle__folder-row">
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 20 20" fill="none">
                        <path d="M16.667 4.9987H9.16699L7.50033 3.33203H3.33366C2.41699 3.33203 1.66699 4.08203 1.66699 4.9987V8.33203H18.3337V6.66536C18.3337 5.7487 17.5837 4.9987 16.667 4.9987Z" fill="#16B364" />
                        <path d="M16.667 5H3.33366C2.41699 5 1.66699 5.75 1.66699 6.66667V15C1.66699 15.9167 2.41699 16.6667 3.33366 16.6667H16.667C17.5837 16.6667 18.3337 15.9167 18.3337 15V6.66667C18.3337 5.75 17.5837 5 16.667 5Z" fill="#32D583" />
                      </svg>
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 20 20" fill="none">
                        <path d="M16.667 4.9987H9.16699L7.50033 3.33203H3.33366C2.41699 3.33203 1.66699 4.08203 1.66699 4.9987V8.33203H18.3337V6.66536C18.3337 5.7487 17.5837 4.9987 16.667 4.9987Z" fill="#7D8998" />
                        <path d="M16.667 5H3.33366C2.41699 5 1.66699 5.75 1.66699 6.66667V15C1.66699 15.9167 2.41699 16.6667 3.33366 16.6667H16.667C17.5837 16.6667 18.3337 15.9167 18.3337 15V6.66667C18.3337 5.75 17.5837 5 16.667 5Z" fill="#A8B1BD" />
                      </svg>
                    </div>
                    <div className="view-mode-toggle__folder-row">
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 20 20" fill="none">
                        <path d="M16.667 4.9987H9.16699L7.50033 3.33203H3.33366C2.41699 3.33203 1.66699 4.08203 1.66699 4.9987V8.33203H18.3337V6.66536C18.3337 5.7487 17.5837 4.9987 16.667 4.9987Z" fill="#7D8998" />
                        <path d="M16.667 5H3.33366C2.41699 5 1.66699 5.75 1.66699 6.66667V15C1.66699 15.9167 2.41699 16.6667 3.33366 16.6667H16.667C17.5837 16.6667 18.3337 15.9167 18.3337 15V6.66667C18.3337 5.75 17.5837 5 16.667 5Z" fill="#A8B1BD" />
                      </svg>
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 20 20" fill="none">
                        <path d="M16.667 4.9987H9.16699L7.50033 3.33203H3.33366C2.41699 3.33203 1.66699 4.08203 1.66699 4.9987V8.33203H18.3337V6.66536C18.3337 5.7487 17.5837 4.9987 16.667 4.9987Z" fill="#7D8998" />
                        <path d="M16.667 5H3.33366C2.41699 5 1.66699 5.75 1.66699 6.66667V15C1.66699 15.9167 2.41699 16.6667 3.33366 16.6667H16.667C17.5837 16.6667 18.3337 15.9167 18.3337 15V6.66667C18.3337 5.75 17.5837 5 16.667 5Z" fill="#A8B1BD" />
                      </svg>
                    </div>
                  </div>
                </div>
                <div className="view-mode-toggle__label">섹션별</div>
              </div>
            </div>
          </div>
        </div>
      )}
    </>
  );
};

export default ViewModeToggle;